<!DOCTYPE html>
<html ng-app="app">
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        
        <link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap-glyphicons.css" >  
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,800,600,300,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="css/index.css" >   
          
    </head>
    <body ng-controller="appCtrl" id="mapBody"> 
    <!--top menu-->
    <div id="topMenu" class=" nav nav-tabs navbar-fixed-top"><a id="myself" class="btn btn-default collapsed" data-toggle="collapse" data-target="#menuTool"  ng-click="makeCollapse();">
       <span id="iconId" class="text-left">
       <img src="img/arrowed_down.png" ></span>
       <span class="text-right" >
       <img src="img/logo.png" ></span>
    </a></div>

    <div id="menuTool" class="collapse">
       <table style="width:100%;">
          <tr>          
            <td colspan="2">
              <input type="text" id="searchInput" ng-model="search" class="inputArea form-control" placeholder="Input Address">
            </td>
          </tr>
          <tr>
            <td style="width:150px;" ng-click ="exchangePostion()"><span style="font-size:20px;color:green" class="glyphicon glyphicon-map-marker"></span>&nbsp;
            <span style="font-size:20px;color:green">Locate Me</span></td>
            <td>
				      <select id="selectedDistance" ng-model="metadata.distance"  class="form-control">
                  <option ng-repeat="c in metadata.picklists.distance">{{c}} km</option>
              </select> 
             </td> 
          </tr>
          <tr><td colspan="3"><button id="searchBtn" ng-disabled="search.length == 0" ng-click="clickSearch()" class="btn btn-default" data-toggle="collapse" data-target="#menuTool">Go</button></td></tr>
       </table>
    </div>

    
		<!-- buttom menu -->
		<ul class="nav nav-tabs navbar-fixed-bottom" style="" >
		  <li id="clickMap" class="active bottomBtnClick" style="width:50%" href="#mapArea" data-toggle="tab" ng-click="mapClick()">Map</li>
		  <li id="clickList" style="width:50%" class="bottomBtnUnclick" href="#maplistArea" data-toggle="tab" ng-click="listClick()">List</li>
		</ul>
		
		<!-- Tab panes -->
		<div class="tab-content" >
		  <div class="tab-pane active" id="mapArea" ng-click="clickMapArea()" >
        <google-map class=""
             center="map.center"
             zoom="map.zoom"
             draggable="true"
             dragging="map.dragging"
             bounds="map.bounds"
             events="map.events"
             options="map.options"
             pan="true"
             control="map.control"
            >

            <!-- current -->
            <marker ng-show="map.currentMarker.show" coords="map.currentMarker" icon='map.currentMarker.icon'></marker>

            <!-- target -->
            <marker ng-show="map.targetMarker.show" coords="map.targetMarker" ></marker>
            
            <!-- account -->
            <marker ng-repeat="m in map.markers" coords="m" click="onMarkerClicked(m)">
                <!-- <window ng-cloak ng-show="showWindow" coords="map.infoWindowWithCustomClass.coords" options="map.infoWindowWithCustomClass.options" closeClick="false">
                        <h5>{{m.name}}</h5>
                        <div>Phone: {{m.phone}}</div>
                        <div>Street : {{m.street}}</div>
                        <div>City : {{m.city}}</div>
                        <div>Country : {{m.country}}</div>
                        
                </window> -->

            </marker>
		    </google-map> 
    	  </div>
		  
		  <div class="tab-pane" id="maplistArea">
    		 <div style="margin-top:70px;">
    			     <ul style="list-style-type:none;padding:10px;">
      			     	<li ng-repeat="listItem in map.markers" style="margin-bottom:20px;background:white;width:100%;border:1px solid gray;padding:5px;">
                        <div class="nameDiv">{{listItem.name}}</div>
                        <div class="addressDiv"><img src="img/home_icon.png">&nbsp;{{listItem.street}}&nbsp;{{listItem.city}}&nbsp;{{listItem.country}}</div>
                        <div class="lineDiv"></div>
                        <div class="telDiv">
                          <a class="btn btn-default telA" href="tel:{{listItem.phone}}">
                            <img src="img/phone_icon.png">&nbsp; {{listItem.phone}} 
                          </a>
                        </div>
                  </li>
    			     </ul>
    		 </div>
         <div style="height:70px;width:100%"><div>
		  </div>
		</div>

    <div class="b"></div>
    <div class="markerContent">
        <p>{{markerName}}</p>
        <div>Phone: {{markerPhone}}</div>
        <div>Street : {{markerStreet}}</div>
        <div>City : {{markerCity}}</div>
        <div>Country : {{markerCountry}}</div>
    </div>

    <div class="alertContent">
        {{alertText}}
    </div>

		
		    <script type="text/javascript" src="libs/jquery.min.js"></script>
        <!--script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false" ></script-->
        <script src="http://maps.googleapis.com/maps/api/js?sensor=false&v=3.14"></script>
        <script type="text/javascript" src="libs/angular.min.js"></script>
        <!--script type="text/javascript" src="libs/angular-1.2.16.min.js"></script-->
        <script type="text/javascript" src="libs/underscore-min.js"></script>
        <script type="text/javascript" src="libs/angular-google-maps.js"></script>
        <script type="text/javascript" src="libs/bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="libs/iscroll.js"></script>
        <script type="text/javascript" src="libs/spin.js"></script>
        <script type="text/javascript" src="js/map.js"></script>        
        <script type="text/javascript">
          directives.api.utils.Logger.doLog = true;
        </script>   

      
    </body>
</html>
